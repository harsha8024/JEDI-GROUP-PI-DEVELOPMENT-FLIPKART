<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FlipFit API Tester</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background: #0f172a;
            color: #e2e8f0;
            height: 100vh;
            overflow: hidden;
        }

        .container {
            display: flex;
            height: 100vh;
            gap: 1px;
            background: #1e293b;
        }

        .left-panel, .right-panel {
            background: #0f172a;
            overflow-y: auto;
        }

        .left-panel {
            width: 45%;
            padding: 2rem;
        }

        .right-panel {
            width: 55%;
            display: flex;
            flex-direction: column;
        }

        .header {
            padding: 2rem;
            border-bottom: 1px solid #1e293b;
        }

        h1 {
            font-size: 1.875rem;
            font-weight: 700;
            color: #f1f5f9;
            margin-bottom: 0.5rem;
        }

        .subtitle {
            color: #94a3b8;
            font-size: 0.875rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            font-size: 0.875rem;
            color: #cbd5e1;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        input, textarea, select {
            width: 100%;
            padding: 0.75rem;
            background: #1e293b;
            border: 1px solid #334155;
            border-radius: 0.375rem;
            color: #e2e8f0;
            font-size: 0.875rem;
            font-family: 'Courier New', monospace;
            transition: all 0.2s;
        }

        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        textarea {
            resize: vertical;
            min-height: 100px;
            font-family: 'Courier New', monospace;
        }

        .url-input-group {
            display: flex;
            gap: 0.5rem;
        }

        .method-select {
            width: 120px;
            flex-shrink: 0;
        }

        .method-GET { border-left: 3px solid #10b981; }
        .method-POST { border-left: 3px solid #3b82f6; }
        .method-PUT { border-left: 3px solid #f59e0b; }
        .method-DELETE { border-left: 3px solid #ef4444; }

        .button-group {
            display: flex;
            gap: 0.75rem;
            margin-top: 2rem;
        }

        button {
            flex: 1;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 0.375rem;
            font-weight: 600;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.2s;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .btn-send {
            background: #3b82f6;
            color: white;
        }

        .btn-send:hover {
            background: #2563eb;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }

        .btn-clear {
            background: #374151;
            color: #e2e8f0;
        }

        .btn-clear:hover {
            background: #4b5563;
        }

        .tabs {
            display: flex;
            border-bottom: 1px solid #1e293b;
            background: #0f172a;
        }

        .tab {
            padding: 1rem 1.5rem;
            background: transparent;
            border: none;
            color: #94a3b8;
            font-weight: 600;
            font-size: 0.875rem;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.2s;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .tab:hover {
            color: #e2e8f0;
            background: #1e293b;
        }

        .tab.active {
            color: #3b82f6;
            border-bottom-color: #3b82f6;
        }

        .tab-content {
            display: none;
            flex: 1;
            overflow-y: auto;
        }

        .tab-content.active {
            display: block;
        }

        .response-content, .presets-content {
            padding: 2rem;
        }

        .status-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .status-success {
            background: rgba(16, 185, 129, 0.1);
            color: #10b981;
        }

        .status-error {
            background: rgba(239, 68, 68, 0.1);
            color: #ef4444;
        }

        .response-data {
            background: #1e293b;
            border: 1px solid #334155;
            border-radius: 0.375rem;
            padding: 1rem;
            white-space: pre-wrap;
            word-wrap: break-word;
            font-family: 'Courier New', monospace;
            font-size: 0.8125rem;
            line-height: 1.6;
            max-height: calc(100vh - 250px);
            overflow-y: auto;
        }

        .preset-category {
            margin-bottom: 2rem;
        }

        .category-title {
            font-size: 1.125rem;
            font-weight: 700;
            color: #f1f5f9;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #1e293b;
        }

        .preset-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 0.75rem;
        }

        .preset-item {
            background: #1e293b;
            border: 1px solid #334155;
            border-radius: 0.375rem;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .preset-item:hover {
            background: #334155;
            border-color: #3b82f6;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .preset-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .preset-label {
            font-weight: 600;
            font-size: 0.875rem;
            color: #f1f5f9;
        }

        .method-badge {
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.625rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .method-badge.GET {
            background: rgba(16, 185, 129, 0.1);
            color: #10b981;
        }

        .method-badge.POST {
            background: rgba(59, 130, 246, 0.1);
            color: #3b82f6;
        }

        .method-badge.PUT {
            background: rgba(245, 158, 11, 0.1);
            color: #f59e0b;
        }

        .method-badge.DELETE {
            background: rgba(239, 68, 68, 0.1);
            color: #ef4444;
        }

        .preset-path {
            font-family: 'Courier New', monospace;
            font-size: 0.75rem;
            color: #94a3b8;
            word-break: break-all;
        }

        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #0f172a;
        }

        ::-webkit-scrollbar-thumb {
            background: #334155;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #475569;
        }

        .info-text {
            color: #64748b;
            font-size: 0.875rem;
            font-style: italic;
            margin-top: 0.5rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="left-panel">
            <div class="header">
                <h1>FlipFit API Tester</h1>
                <div class="subtitle">Test your Dropwizard REST endpoints</div>
            </div>

            <form id="apiForm">
                <div class="form-group">
                    <label>Base URL</label>
                    <input type="text" id="baseUrl" value="http://localhost:8080" placeholder="http://localhost:8080">
                </div>

                <div class="form-group">
                    <label>Endpoint</label>
                    <div class="url-input-group">
                        <select id="method" class="method-select">
                            <option value="GET">GET</option>
                            <option value="POST">POST</option>
                            <option value="PUT">PUT</option>
                            <option value="DELETE">DELETE</option>
                        </select>
                        <input type="text" id="endpoint" placeholder="/api/endpoint">
                    </div>
                </div>

                <div class="form-group">
                    <label>Query Parameters</label>
                    <textarea id="queryParams" placeholder="key1=value1&#10;key2=value2"></textarea>
                    <div class="info-text">One parameter per line (key=value)</div>
                </div>

                <div class="form-group">
                    <label>Request Body (JSON)</label>
                    <textarea id="requestBody" rows="8" placeholder='{"key": "value"}'></textarea>
                </div>

                <div class="button-group">
                    <button type="submit" class="btn-send">Send Request</button>
                    <button type="button" class="btn-clear" onclick="clearForm()">Clear</button>
                </div>
            </form>
        </div>

        <div class="right-panel">
            <div class="tabs">
                <button class="tab active" onclick="switchTab('response')">Response</button>
                <button class="tab" onclick="switchTab('presets')">API Endpoints</button>
            </div>

            <div id="responseTab" class="tab-content active">
                <div class="response-content">
                    <div id="statusBadge"></div>
                    <div id="responseData" class="response-data">Send a request to see the response here...</div>
                </div>
            </div>

            <div id="presetsTab" class="tab-content">
                <div class="presets-content" id="presetsContainer"></div>
            </div>
        </div>
    </div>

    <script>
        const presets = [
            {cat:'Customer', label:'Customer Login', method:'POST', path:'/customer/login', query:'email=customer@example.com&password=password123'},
            {cat:'Customer', label:'Customer Registration', method:'POST', path:'/customer/register', body:{name:'John Customer', email:'customer@example.com', phoneNumber:'1234567890', password:'password123', city:'Bangalore'}},
            {cat:'Customer', label:'View All Gyms', method:'GET', path:'/customer/gyms', query:'city=Bangalore'},
            {cat:'Customer', label:'View Gym Slots', method:'GET', path:'/customer/gyms/{gymId}/slots', query:'date=2024-01-15'},
            {cat:'Customer', label:'Book Slot', method:'POST', path:'/customer/book', query:'userId=1&slotId=1&gymId=1&date=2024-01-15'},
            {cat:'Customer', label:'View My Bookings', method:'GET', path:'/customer/bookings/{userId}'},
            {cat:'Customer', label:'Cancel Booking', method:'PUT', path:'/customer/cancel/{bookingId}', query:'userId=1'},

            {cat:'Owner', label:'Owner Login', method:'POST', path:'/owner/login', query:'email=owner@example.com&password=password123'},
            {cat:'Owner', label:'Owner Registration', method:'POST', path:'/owner/register', body:{name:'Jane Owner', email:'owner@example.com', phoneNumber:'9876543210', password:'password123', panNumber:'ABCDE1234F', gstinNumber:'22ABCDE1234F1Z5', aadharNumber:'123456789012'}},
            {cat:'Owner', label:'Add Gym', method:'POST', path:'/owner/gyms/register', body:{gymName:'FitZone', location:'Bangalore', gymOwnerId:'1'}},
            {cat:'Owner', label:'View My Gyms', method:'GET', path:'/owner/gyms/{ownerId}'},
            {cat:'Owner', label:'View My Bookings', method:'GET', path:'/owner/bookings/{ownerId}'},
            {cat:'Owner', label:'Create Slot', method:'POST', path:'/owner/slots/create', query:'gymId=1&startTime=10:00&endTime=11:00&capacity=20'},
            {cat:'Owner', label:'Get Gym Slots', method:'GET', path:'/owner/slots/{gymId}'},
            {cat:'Owner', label:'Update Slot', method:'PUT', path:'/owner/slots/{slotId}', query:'capacity=25'},
            {cat:'Owner', label:'Delete Slot', method:'DELETE', path:'/owner/slots/{slotId}'},
            {cat:'Owner', label:'Update Schedule', method:'PUT', path:'/owner/schedule/update', query:'gymId=1'},

            {cat:'Admin', label:'Admin Login', method:'POST', path:'/admin/login', query:'email=admin@example.com&password=password123'},
            {cat:'Admin', label:'View All Gyms', method:'GET', path:'/admin/gyms'},
            {cat:'Admin', label:'View All Users', method:'GET', path:'/admin/users'},
            {cat:'Admin', label:'View All Bookings', method:'GET', path:'/admin/bookings'},
            {cat:'Admin', label:'View Pending Gyms', method:'GET', path:'/admin/gyms/pending'},
            {cat:'Admin', label:'View Approved Gyms', method:'GET', path:'/admin/gyms/approved'},
            {cat:'Admin', label:'Approve Gym', method:'PUT', path:'/admin/gyms/approve/{gymId}'},
            {cat:'Admin', label:'Reject Gym', method:'PUT', path:'/admin/gyms/reject/{gymId}'},
            {cat:'Admin', label:'View Approved Owners', method:'GET', path:'/admin/owners/approved'},
            {cat:'Admin', label:'View Pending Owners', method:'GET', path:'/admin/owners/pending'},
            {cat:'Admin', label:'Approve Owner', method:'PUT', path:'/admin/owners/approve/{ownerId}'},
            {cat:'Admin', label:'Reject Owner', method:'PUT', path:'/admin/owners/reject/{ownerId}'},
            {cat:'Admin', label:'View Pending Slots', method:'GET', path:'/admin/slots/pending'},
            {cat:'Admin', label:'Approve Slot', method:'PUT', path:'/admin/slots/approve/{slotId}'},
            {cat:'Admin', label:'Reject Slot', method:'PUT', path:'/admin/slots/reject/{slotId}'},
            {cat:'Admin', label:'View Gyms by Location', method:'GET', path:'/admin/gyms/location/{location}'},
            {cat:'Admin', label:'Generate Reports', method:'GET', path:'/admin/reports', query:'reportType=1'},
            {cat:'Admin', label:'View Payment Reports', method:'GET', path:'/admin/reports/payment'},
            {cat:'Admin', label:'View Revenue Report', method:'GET', path:'/admin/reports/revenue', query:'startDate=2024-01-01&endDate=2024-12-31'},

            {cat:'Slot', label:'Create Slot', method:'POST', path:'/slot/create', query:'gymId=1&startTime=10:00&endTime=11:00&capacity=20'},
            {cat:'Slot', label:'Get Slots by Gym', method:'GET', path:'/slot/gym/{gymId}'},
            {cat:'Slot', label:'Get Slot by ID', method:'GET', path:'/slot/{slotId}'},
            {cat:'Slot', label:'Update Slot', method:'PUT', path:'/slot/{slotId}', query:'capacity=25'},
            {cat:'Slot', label:'Delete Slot', method:'DELETE', path:'/slot/{slotId}'},

            {cat:'Payment', label:'Process Payment', method:'POST', path:'/payment/process', query:'bookingId=1&amount=500&paymentMethod=UPI'},
            {cat:'Payment', label:'Get Payment Details', method:'GET', path:'/payment/{paymentId}'},
            {cat:'Payment', label:'Refund Payment', method:'POST', path:'/payment/refund/{paymentId}'},

            {cat:'User', label:'Generic User Login', method:'POST', path:'/user/login', body:{email:'user@example.com', password:'password123', roleId:1}},
            {cat:'User', label:'Generic User Registration', method:'POST', path:'/user/register', body:{name:'Generic User', email:'genericuser@example.com', phoneNumber:'1234567890', password:'password123', roleId:2, city:'Bangalore'}},
            {cat:'User', label:'Update Password', method:'PUT', path:'/user/updatePassword/{userId}', body:{password:'newPassword123'}},
            {cat:'User', label:'Get User by ID', method:'GET', path:'/user/{userId}'},
            {cat:'User', label:'View Profile by Email', method:'GET', path:'/user/viewProfile', query:'email=user@example.com'},

            {cat:'Registration', label:'Register User', method:'POST', path:'/registration/register', body:{name:'Jane Doe', email:'jane@example.com', phoneNumber:'9876543210', password:'pass456', roleId:3, city:'Delhi'}},
            {cat:'Registration', label:'Update Registration', method:'PUT', path:'/registration/{registrationId}', body:{name:'Jane Updated', email:'jane.updated@example.com', phoneNumber:'9999999999'}},
            {cat:'Registration', label:'Get Registration by ID', method:'GET', path:'/registration/{registrationId}'},
            {cat:'Registration', label:'Get All Registrations', method:'GET', path:'/registration/all'},
            {cat:'Registration', label:'Delete Registration', method:'DELETE', path:'/registration/{registrationId}'}
        ];

        let currentTab = 'response';

        function renderPresets() {
            const container = document.getElementById('presetsContainer');
            const categories = [...new Set(presets.map(p => p.cat))];
            
            container.innerHTML = categories.map(cat => {
                const categoryPresets = presets.filter(p => p.cat === cat);
                return `
                    <div class="preset-category">
                        <div class="category-title">${cat} APIs</div>
                        <div class="preset-grid">
                            ${categoryPresets.map((preset, idx) => `
                                <div class="preset-item" onclick='loadPreset(${JSON.stringify(preset)})'>
                                    <div class="preset-header">
                                        <div class="preset-label">${preset.label}</div>
                                        <div class="method-badge ${preset.method}">${preset.method}</div>
                                    </div>
                                    <div class="preset-path">${preset.path}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }).join('');
        }

        function loadPreset(preset) {
            document.getElementById('method').value = preset.method;
            document.getElementById('endpoint').value = preset.path;
            
            if (preset.query) {
                document.getElementById('queryParams').value = preset.query.split('&').join('\n');
            } else {
                document.getElementById('queryParams').value = '';
            }
            
            if (preset.body) {
                document.getElementById('requestBody').value = JSON.stringify(preset.body, null, 2);
            } else {
                document.getElementById('requestBody').value = '';
            }
            
            switchTab('response');
            
            const methodSelect = document.getElementById('method');
            methodSelect.className = 'method-select method-' + preset.method;
        }

        function switchTab(tab) {
            currentTab = tab;
            
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            
            if (tab === 'response') {
                document.querySelector('.tab:nth-child(1)').classList.add('active');
                document.getElementById('responseTab').classList.add('active');
            } else {
                document.querySelector('.tab:nth-child(2)').classList.add('active');
                document.getElementById('presetsTab').classList.add('active');
            }
        }

        function clearForm() {
            document.getElementById('endpoint').value = '';
            document.getElementById('queryParams').value = '';
            document.getElementById('requestBody').value = '';
            document.getElementById('method').value = 'GET';
            document.getElementById('method').className = 'method-select';
        }

        document.getElementById('apiForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const baseUrl = document.getElementById('baseUrl').value.trim();
            const method = document.getElementById('method').value;
            const endpoint = document.getElementById('endpoint').value.trim();
            const queryParams = document.getElementById('queryParams').value.trim();
            const requestBody = document.getElementById('requestBody').value.trim();
            
            let url = baseUrl + endpoint;
            
            if (queryParams) {
                const params = queryParams.split('\n')
                    .filter(line => line.trim())
                    .map(line => {
                        const [key, ...valueParts] = line.split('=');
                        return `${encodeURIComponent(key.trim())}=${encodeURIComponent(valueParts.join('=').trim())}`;
                    })
                    .join('&');
                url += '?' + params;
            }
            
            const options = {
                method: method,
                headers: {
                    'Content-Type': 'application/json'
                }
            };
            
            if (requestBody && (method === 'POST' || method === 'PUT')) {
                options.body = requestBody;
            }
            
            try {
                const response = await fetch(url, options);
                const data = await response.text();
                
                let formattedData;
                try {
                    formattedData = JSON.stringify(JSON.parse(data), null, 2);
                } catch {
                    formattedData = data;
                }
                
                const statusBadge = document.getElementById('statusBadge');
                const responseData = document.getElementById('responseData');
                
                if (response.ok) {
                    statusBadge.innerHTML = `<span class="status-badge status-success">Success - ${response.status} ${response.statusText}</span>`;
                } else {
                    statusBadge.innerHTML = `<span class="status-badge status-error">Error - ${response.status} ${response.statusText}</span>`;
                }
                
                responseData.textContent = formattedData;
                switchTab('response');
                
            } catch (error) {
                const statusBadge = document.getElementById('statusBadge');
                const responseData = document.getElementById('responseData');
                
                statusBadge.innerHTML = `<span class="status-badge status-error">Request Failed</span>`;
                responseData.textContent = `Error: ${error.message}\n\nMake sure your server is running and CORS is configured correctly.`;
                switchTab('response');
            }
        });

        document.getElementById('method').addEventListener('change', function() {
            this.className = 'method-select method-' + this.value;
        });

        renderPresets();
    </script>
</body>
</html>